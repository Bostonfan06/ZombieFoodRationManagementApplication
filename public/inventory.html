<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Inventory</title>
  <!-- Latest compiled and minified CSS & JS -->
  <link href="https://fonts.googleapis.com/css?family=Pangolin" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/4.0.0/flatly/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css" media="screen" title="no title">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
  <div class="container inventory">
    <div class="row">
      <div class="col-md-2 col-sm-2">
        <a class="btn btn-light animated infinite pulse" href="/ims">New Item</a>
      </div>
      <div class="col-md-2 col-sm-2">
        <a class="btn btn-light animated infinite pulse" href="/survivor-manager">Manage Survivors</a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 inventory-container">
          <table id='inventoryTable' class="table">
              <thead>
                <tr>
                  <th scope="col" onclick="sortTableInt(0)">#</th>
                  <th scope="col" onclick="sortTable(1)">Item</th>
                  <th scope="col" onclick="sortTable(2)">Category</th>
                  <th scope="col" onclick="sortTableInt(3)">Units</th>
                  <th scope="col" onclick="sortTableInt(4)">Expiration Date</th>
                  <th scope="col" onclick="sortTable(5)">Belongs To</th>
                  <th scope="col" onclick="sortTable(6)">Options</th>
                </tr>
              </thead>
              <tbody id="itemBody">
              </tbody>
            </table>
      </div>
    </div>
  </div>

  <script src="js/inventory.js" type="text/javascript"></script>
  <script>
    function sortTable(n) {
        var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
        table = document.getElementById("inventoryTable");
        switching = true;
      
        dir = "asc"; 
      
        while (switching) {
      
          switching = false;
          rows = table.getElementsByTagName("TR");
      
          for (i = 1; i < (rows.length - 1); i++) {
            shouldSwitch = false;
      
            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];
      
            if (dir == "asc") {
              if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          console.log("x = " + x.innerHTML + " y = " + y.innerHTML)
          shouldSwitch= true;
                break;
              }
            } else if (dir == "desc") {
              if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          //console.log("xD = " + x.innerHTML + " yD = " + y.innerHTML)
                shouldSwitch= true;
                break;
              }
            }
          }
          if (shouldSwitch) {
      
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
      
            switchcount ++; 
          } else {
      
            if (switchcount == 0 && dir == "asc") {
              dir = "desc";
              switching = true;
            }
          }
        }
      }

function sortTableInt(n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById("inventoryTable");
    switching = true;
  
    dir = "asc"; 
  
    while (switching) {
  
      switching = false;
      rows = table.getElementsByTagName("TR");
  
      for (i = 1; i < (rows.length - 1); i++) {
        shouldSwitch = false;
  
        x = rows[i].getElementsByTagName("TD")[n];
        y = rows[i + 1].getElementsByTagName("TD")[n];
  
        if (dir == "asc") {
          if (parseInt(x.innerHTML) > parseInt(y.innerHTML)) {
			console.log("x = " + x.innerHTML + " y = " + y.innerHTML)
			shouldSwitch= true;
            break;
          }
        } else if (dir == "desc") {
          if (parseInt(x.innerHTML) < parseInt(y.innerHTML)) {
			//console.log("xD = " + x.innerHTML + " yD = " + y.innerHTML)
            shouldSwitch= true;
            break;
          }
        }
      }
      if (shouldSwitch) {
  
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
  
        switchcount ++; 
      } else {
  
        if (switchcount == 0 && dir == "asc") {
          dir = "desc";
          switching = true;
        }
      }
    }
  }      
    </script>
</body>

</html>
